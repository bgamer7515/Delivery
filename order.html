<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Perfume Delivery - Order</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <header>
    <h1>Place Your Order</h1>
    <nav>
      <a href="index.html">Home</a> |
      <a href="services.html">Shop</a> |
      <a href="about.html">About</a> |
      <a href="order.html">Order</a>
    </nav>
  </header>

  <main>
    <div id="cart">
      <h2>Your Cart</h2>
      <ul id="cartItems"></ul>
      <p><strong>Total: ₦<span id="total">0</span></strong></p>
    </div>

    <h3>Fill Your Details to Place Order</h3>
    <form action="https://formsubmit.co/godwinjoel2010@gmail.com" method="POST">
      <input type="text" name="name" placeholder="Your Name" required /><br />
      <input type="text" name="address" placeholder="Your Address" required /><br />
      <input type="tel" name="phone" placeholder="Phone Number" required /><br />

      <textarea name="orderDetails" id="orderDetails" hidden></textarea>

      <input type="hidden" name="_captcha" value="false" />
      <input type="hidden" name="_template" value="table" /><button type="submit">Submit Order</button>
    </form>
  </main>

  <script>
    let cart = [];
    let total = 0;

    // Load cart from localStorage
    const storedCart = localStorage.getItem('cart');
    const storedTotal = localStorage.getItem('total');

    if (storedCart) cart = JSON.parse(storedCart);
    if (storedTotal) total = parseFloat(storedTotal);

    // Display cart items
    const cartList = document.getElementById('cartItems');
    const totalSpan = document.getElementById('total');

    cart.forEach(c => {
      const li = document.createElement('li');
      li.textContent = `c.item - ₦{c.price}`;
      cartList.appendChild(li);
    });

    totalSpan.textContent = total;

    // Fill hidden order details before form submit
    document.querySelector('form').addEventListener('submit', function (e) {
      const orderSummary = cart.map(c => `c.item - ₦{c.price}`).join('\n');
      const fullOrder = `Order Summary:\norderSummary: ₦{total}`;
      document.getElementById('orderDetails').value = fullOrder;

      // Clear cart from storage after submission
      localStorage.removeItem('cart');
      localStorage.removeItem('total');
    });
  </script>

</body>
</html>